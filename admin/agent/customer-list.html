<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>SMART TRAVEL ADMIN</title>

	<!--   -->
	<link rel="shortcut icon" href="../image/favicon.ico">
	<link rel="stylesheet" href="../css/a_reset.css">
	<link rel="stylesheet" href="../css/a_variables.css">
	<link rel="stylesheet" href="../css/a_components.css">
	<link rel="stylesheet" href="../css/a_contents.css">
</head>

<body>

	<!-- header   -->
	<header class="layout-header"></header>

	<!--   -->
	<main class="layout-main">
		<!-- nav   -->
		<nav class="layout-nav"></nav>

		<section class="layout-content">
			<h1 class="page-title" data-lan-eng="Customer List">Customer List</h1>

			<div class="card-panel jw-mgt32">

				<div class="list-header">
					<div class="result-count">
						<span data-lan-eng="Search results">Search results</span> <span class="result-count__num">999</span><span data-lan-eng="items">items</span>
					</div>
					<form class="search-form" action="" method="get">
						<div class="search-field">
							<input type="text" class="search-input" placeholder=" " data-lan-eng="Customer Name Search">
							<button type="submit" class="jw-button search-btn" aria-label="">
								<span class="search-ico"><img src="../image/search.svg" alt=""></span>
							</button>
						</div>
					</form>
				</div>

				<table class="jw-tableA">
					<colgroup>
						<col class="col-60"> <!-- No -->
						<col> <!--  (auto) -->
						<col> <!--  -->
						<col> <!--  -->
						<col> <!--  -->
					</colgroup>
					<thead>
						<tr>
							<th class="no is-center">No</th>
							<th data-lan-eng="Customer Name">Customer Name</th>
							<th data-lan-eng="Email">Email</th>
							<th data-lan-eng="Contacts">Contacts</th>
							<th data-lan-eng="Registration date/time">Registration date/time</th>
						</tr>
					</thead>
					<tbody id="customersTableBody">
						<!--  JavaScript   -->
						<tr>
							<td colspan="5" class="is-center"> ...</td>
						</tr>
					</tbody>
				</table>

				<div class="jw-pagebox" role="navigation" aria-label="">
					<div class="contents">
						<button type="button" class="first" aria-label=" " aria-disabled="false">
							<img src="../image/first.svg" alt="">
						</button>
						<button type="button" class="prev" aria-label=" " aria-disabled="false">
							<img src="../image/prev.svg" alt="">
						</button>

						<div class="page" role="list">
							<button type="button" class="p" role="listitem">1</button>
							<button type="button" class="p" role="listitem">2</button>
							<button type="button" class="p show" role="listitem" aria-current="page">3</button>
							<button type="button" class="p" role="listitem">4</button>
							<button type="button" class="p" role="listitem">5</button>
						</div>

						<button type="button" class="next" aria-label=" " aria-disabled="false">
							<img src="../image/next.svg" alt="">
						</button>
						<button type="button" class="last" aria-label=" " aria-disabled="false">
							<img src="../image/last.svg" alt="">
						</button>
					</div>
				</div>

			</div>

			<div class="controller">
				<button type="button" class="jw-button typeA" onclick="downloadCustomers()" data-lan-eng="Download">Download</button>
				
				<div class="layerToggleWrap">
					<button type="button" class="jw-button typeB" onclick="layerToggle(this)"><img src="../image/buttonB.svg" alt="">Add New Customer</button>
					<div class="fab-menu" aria-hidden="true">
						<button type="button" class="jw-button" onclick="closeFabMenu(); goToCustomerRegister();"><img src="../image/plus.svg" alt=""><span data-lan-eng="Single registration">Single registration</span></button>
						<button type="button" class="jw-button" onclick="closeFabMenu(); openBatchUploadModal();"><img src="../image/upload.svg" alt=""><span data-lan-eng="Batch Registration">Batch Registration</span></button>
					</div>
				</div>
			</div>

		</section>

	</main>

	<!--   -->
	<script src="../js/default.js"></script>
	<script src="../js/agent.js"></script>
	<script src="../js/agent-customer-list.js"></script>
	<script>
		init({
			headerUrl: '../inc/header.html',
			navUrl: '../inc/nav_agent.html'
		});
		
		//    
		function closeFabMenu() {
			const menu = document.querySelector('.layerToggleWrap .fab-menu');
			setFabMenuState(menu, false);
		}
		
		//     
		document.addEventListener('DOMContentLoaded', function() {
			document.addEventListener('click', function(e) {
				const layerToggleWrap = document.querySelector('.layerToggleWrap');
				if (layerToggleWrap && !layerToggleWrap.contains(e.target)) {
					closeFabMenu();
				}
			});
		});
		
		function goToCustomerRegister() {
			window.location.href = 'customer-register.html';
		}
		
		function openCustomerRegisterModal() {
			modal('customer-register-modal.html', '580px', '300px');
		}
		
		function openBatchUploadModal() {
			modal('customer-batch-upload-modal.html', '600px', '500px');
		}
		
		function downloadCustomers() {
			// CSV 
			window.location.href = '../backend/api/agent-api.php?action=downloadCustomers';
		}
	</script>
</body>

</html>
